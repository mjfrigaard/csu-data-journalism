<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data Visualization with ggplot2 (part 2)</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">CSUC Data Journalism</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Course outline</a>
</li>
<li>
  <a href="lessons-exercises.html">Lessons and exercises</a>
</li>
<li>
  <a href="slides.html">Slides</a>
</li>
<li>
  <a href="more-resources.html">More resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data Visualization with ggplot2 (part 2)</h1>

</div>


<div id="outline" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Outline</h1>
<ol style="list-style-type: decimal">
<li>Import Apple Mobility Data<br />
</li>
<li>Wrangle Apple Mobility Data<br />
</li>
<li>Counting things<br />
</li>
<li>Histograms<br />
</li>
<li>Density plots<br />
</li>
<li>Ridgeline plots<br />
</li>
<li>Violin plots</li>
</ol>
</div>
<div id="objectives" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Objectives</h1>
<p>In order to use graphs and figures to effectively communicate with our audience, we need to consider a few things:</p>
<ol style="list-style-type: decimal">
<li>Recognize the needs of your audience (who are they, and where are they coming from?)</li>
</ol>
<ul>
<li><em>level of data literacy, subject matter expertise, etc.</em></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Communicate the quality of the data with stakeholders (can we answer their question(s) with the available data?)</li>
</ol>
<ul>
<li><em>let them know the good and the bad news</em></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Identify the correct data visualization (based on the data <em>and</em> the problem/question)</li>
</ol>
<ul>
<li><em>single variable, bivariate, and multivariate graphs</em></li>
</ul>
</div>
<div id="materials" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Materials</h1>
<p>View the slides for this section <a href="https://mjfrigaard.github.io/csuc-data-journalism/slides.html">here</a>.</p>
<p>View the exercises for this section <a href="https://mjfrigaard.github.io/csuc-data-journalism/lessons-exercises.html">here</a>.</p>
</div>
<div id="previous-lessons" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Previous lessons</h1>
<p>All of the exercises and lessons are available <a href="">here</a>. Read more about <a href="https://ggplot2.tidyverse.org/index.html"><code>ggplot2</code></a> on the tidyverse website, and in the <a href="https://r4ds.had.co.nz/data-visualisation.html">Data Visualisation</a> chapter of R for Data Science.</p>
</div>
<div id="load-the-packages" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Load the packages</h1>
<p>The main packages we’re going to use are <code>dplyr</code>, <code>tidyr</code>, and <code>ggplot2</code>. These are all part of the <code>tidyverse</code>, so we’ll import this package below:</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
</div>
<div id="example-covid-and-mobility" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Example: COVID and Mobility</h1>
<p>Assume we received the following questions from a stakeholder:</p>
<p><strong><em>How has COVID changed our modes of transportation?</em></strong></p>
<p>Or</p>
<p><strong><em>Are people using fewer or different forms of transportation since the COVID pandemic?</em></strong></p>
<p>Questions we should be considering:</p>
<ol style="list-style-type: decimal">
<li>What kind of measurements would this be?</li>
</ol>
<ul>
<li><em>how people travel (walk, drive, etc.)</em></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>What would these data look like?</li>
</ol>
<ul>
<li><em>what would the columns and rows look like?</em></li>
</ul>
<div id="data-import" class="section level2 tabset" number="6.1">
<h2 class="tabset" number="6.1"><span class="header-section-number">6.1</span> Data Import</h2>
<p>We’re going to use the following data to answer the stakeholder’s questions:</p>
<ul>
<li>Apple mobility data: <a href="https://covid19.apple.com/mobility" class="uri">https://covid19.apple.com/mobility</a></li>
</ul>
<p>Import the data below</p>
<pre class="r"><code>AppleMobRaw &lt;- readr::read_csv(&quot;https://bit.ly/36tTVpe&quot;)</code></pre>
<div id="tidy-applemobraw" class="section level3" number="6.1.1">
<h3 number="6.1.1"><span class="header-section-number">6.1.1</span> Tidy <code>AppleMobRaw</code></h3>
<p>These data need to be restructured into a tidy format.</p>
<pre class="r"><code>AppleMobRaw %&gt;% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
                      names_to = &quot;date&quot;, 
                      values_to = &quot;dir_request&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["geo_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["transportation_type"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sub-region"],"name":[4],"type":["chr"],"align":["left"]},{"label":["country"],"name":[5],"type":["chr"],"align":["left"]},{"label":["date"],"name":[6],"type":["chr"],"align":["left"]},{"label":["dir_request"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-13","7":"100.00"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-14","7":"95.30"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-15","7":"101.43"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-16","7":"97.20"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-17","7":"103.55"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-18","7":"112.67"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-19","7":"104.83"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-20","7":"94.39"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-21","7":"94.07"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-22","7":"93.51"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-23","7":"92.94"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-24","7":"102.13"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-25","7":"102.38"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-26","7":"101.41"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-27","7":"94.62"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-28","7":"89.12"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-29","7":"90.17"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-30","7":"90.21"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-01-31","7":"97.71"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-01","7":"102.50"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-02","7":"108.92"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-03","7":"92.82"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-04","7":"91.48"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-05","7":"93.99"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-06","7":"96.72"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-07","7":"102.46"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-08","7":"103.29"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-09","7":"107.83"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-10","7":"87.99"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-11","7":"94.18"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-12","7":"94.62"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-13","7":"99.70"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-14","7":"139.30"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-15","7":"123.90"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-16","7":"129.41"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-17","7":"102.24"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-18","7":"88.09"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-19","7":"88.17"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-20","7":"94.48"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-21","7":"100.62"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-22","7":"111.02"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-23","7":"113.50"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-24","7":"86.95"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-25","7":"83.01"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-26","7":"85.44"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-27","7":"82.73"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-28","7":"89.70"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-02-29","7":"95.48"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-01","7":"100.43"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-02","7":"89.25"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-03","7":"91.02"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-04","7":"89.72"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-05","7":"94.87"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-06","7":"102.82"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-07","7":"109.92"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-08","7":"110.07"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-09","7":"79.68"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-10","7":"68.24"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-11","7":"51.77"},{"1":"country/region","2":"Albania","3":"driving","4":"NA","5":"NA","6":"2020-03-12","7":"43.79"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="wrangle-applemobraw" class="section level3" number="6.1.2">
<h3 number="6.1.2"><span class="header-section-number">6.1.2</span> Wrangle <code>AppleMobRaw</code></h3>
<p>We will remove the missing values from <code>country</code> and <code>sub-region</code></p>
<pre class="r"><code>AppleMobRaw %&gt;% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
                      names_to = &quot;date&quot;, values_to = &quot;dir_request&quot;) %&gt;% 
    # remove missing country and missing sub-region data
  dplyr::filter(!is.na(country) &amp; !is.na(`sub-region`))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["geo_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["transportation_type"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sub-region"],"name":[4],"type":["chr"],"align":["left"]},{"label":["country"],"name":[5],"type":["chr"],"align":["left"]},{"label":["date"],"name":[6],"type":["chr"],"align":["left"]},{"label":["dir_request"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-13","7":"100.00"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-14","7":"100.73"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-15","7":"102.86"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-16","7":"102.65"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-17","7":"109.39"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-18","7":"109.62"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-19","7":"98.21"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-20","7":"102.74"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-21","7":"103.85"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-22","7":"102.01"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-23","7":"101.40"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-24","7":"107.57"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-25","7":"109.13"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-26","7":"97.51"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-27","7":"101.64"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-28","7":"100.59"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-29","7":"103.33"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-30","7":"104.31"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-01-31","7":"113.82"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-01","7":"113.59"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-02","7":"98.83"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-03","7":"103.15"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-04","7":"103.89"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-05","7":"101.56"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-06","7":"102.56"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-07","7":"111.98"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-08","7":"112.91"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-09","7":"88.21"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-10","7":"105.14"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-11","7":"107.55"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-12","7":"107.62"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-13","7":"110.29"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-14","7":"121.38"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-15","7":"115.58"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-16","7":"98.64"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-17","7":"108.30"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-18","7":"111.55"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-19","7":"106.26"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-20","7":"98.08"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-21","7":"106.48"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-22","7":"96.88"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-23","7":"82.05"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-24","7":"87.53"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-25","7":"97.50"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-26","7":"97.03"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-27","7":"105.28"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-28","7":"102.80"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-02-29","7":"103.48"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-01","7":"92.08"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-02","7":"95.39"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-03","7":"100.71"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-04","7":"101.12"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-05","7":"102.29"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-06","7":"108.11"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-07","7":"107.92"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-08","7":"96.28"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-09","7":"94.72"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-10","7":"96.77"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-11","7":"111.70"},{"1":"city","2":"Aachen","3":"driving","4":"North Rhine-Westphalia","5":"Germany","6":"2020-03-12","7":"90.88"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Use <code>mutate()</code> to create a properly formatted <code>date</code> variable, and <code>rename()</code> the <code>transportation_type</code> variable to <code>trans_type</code>. Apply <code>janitor::clean_names()</code> to the entire dataset and assign the final output to <code>TidyApple</code>.</p>
<pre class="r"><code>AppleMobRaw %&gt;% 
  tidyr::pivot_longer(cols = -c(geo_type:country), 
                      names_to = &quot;date&quot;, values_to = &quot;dir_request&quot;) %&gt;% 
    # remove missing country and missing sub-region data
  dplyr::filter(!is.na(country) &amp; !is.na(`sub-region`)) %&gt;% 
  # format date
  mutate(date = lubridate::ymd(date)) %&gt;% 
  # change name of transportation types
  rename(trans_type = transportation_type) %&gt;% 
  # clean names 
  janitor::clean_names() -&gt; TidyApple</code></pre>
</div>
</div>
<div id="counting" class="section level2 tabset" number="6.2">
<h2 class="tabset" number="6.2"><span class="header-section-number">6.2</span> Counting</h2>
<p>One of the most important jobs of analytic work is <a href="https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html">counting things</a>. There are many ways to accomplish this in R, but we’ll stick with the <code>dplyr</code> package because it’s part of the <code>tidyverse</code>.</p>
<p>The <code>dplyr</code> function for counting responses of a categorical or factor variable is <code>count()</code>, and it works like this:</p>
<pre class="r"><code>Data %&gt;% 
  count(variable)</code></pre>
<div id="count" class="section level3" number="6.2.1">
<h3 number="6.2.1"><span class="header-section-number">6.2.1</span> Count</h3>
<p>So, if we wanted to count the number of different transportation types in the <code>TidyApple</code> data frame, it would look like this,</p>
<pre class="r"><code>TidyApple %&gt;% 
  dplyr::count(trans_type)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["trans_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"driving","2":"743682"},{"1":"transit","2":"106512"},{"1":"walking","2":"205099"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="count-sort" class="section level3" number="6.2.2">
<h3 number="6.2.2"><span class="header-section-number">6.2.2</span> Count &amp; sort</h3>
<p>We can also sort the responses using the <code>sort = TRUE</code> argument.</p>
<pre class="r"><code>TidyApple %&gt;% 
  dplyr::count(trans_type, sort = TRUE)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["trans_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"driving","2":"743682"},{"1":"walking","2":"205099"},{"1":"transit","2":"106512"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="iterate-with-count" class="section level3" number="6.2.3">
<h3 number="6.2.3"><span class="header-section-number">6.2.3</span> Iterate with count</h3>
<p>We can also combine <code>dplyr::select_if()</code> and <code>purrr::map()</code> to pass the <code>count()</code> function to all the character variables in <code>TidyApple</code>.</p>
<pre class="r"><code>TidyApple %&gt;% 
  select_if(is.character) %&gt;% 
  map(~count(data.frame(x = .x), x, sort = TRUE)) -&gt; tidy_apple_counts</code></pre>
<p>We can example the counts of each value by using the <code>$</code> to subset the <code>tidy_apple_counts</code> list.</p>
<pre class="r"><code>tidy_apple_counts$sub_region</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["x"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Texas","2":"76397"},{"1":"California","2":"52622"},{"1":"Georgia","2":"41527"},{"1":"Virginia","2":"38991"},{"1":"Florida","2":"38357"},{"1":"Ohio","2":"38357"},{"1":"North Carolina","2":"35821"},{"1":"New York","2":"33602"},{"1":"Pennsylvania","2":"32651"},{"1":"Indiana","2":"29481"},{"1":"Michigan","2":"28530"},{"1":"Tennessee","2":"27262"},{"1":"Illinois","2":"26945"},{"1":"Missouri","2":"24409"},{"1":"Kentucky","2":"23458"},{"1":"Alabama","2":"20922"},{"1":"Wisconsin","2":"19971"},{"1":"Colorado","2":"19654"},{"1":"Minnesota","2":"19654"},{"1":"Mississippi","2":"19654"},{"1":"Oklahoma","2":"19654"},{"1":"Louisiana","2":"19337"},{"1":"South Carolina","2":"18069"},{"1":"Iowa","2":"17752"},{"1":"Washington","2":"17118"},{"1":"Arkansas","2":"15850"},{"1":"New Jersey","2":"14582"},{"1":"Oregon","2":"14265"},{"1":"Maryland","2":"13631"},{"1":"Kansas","2":"12363"},{"1":"England","2":"11412"},{"1":"Massachusetts","2":"11412"},{"1":"New Mexico","2":"10144"},{"1":"Arizona","2":"9193"},{"1":"Nebraska","2":"8876"},{"1":"Utah","2":"8876"},{"1":"West Virginia","2":"8876"},{"1":"Connecticut","2":"7608"},{"1":"Idaho","2":"6974"},{"1":"Nevada","2":"6023"},{"1":"Puerto Rico","2":"5706"},{"1":"Hawaii","2":"4755"},{"1":"Maine","2":"4755"},{"1":"North Rhine-Westphalia","2":"4755"},{"1":"Vermont","2":"4121"},{"1":"Montana","2":"3804"},{"1":"New Hampshire","2":"3804"},{"1":"North Dakota","2":"3804"},{"1":"Wyoming","2":"3804"},{"1":"Rhode Island","2":"3487"},{"1":"South Dakota","2":"3487"},{"1":"Shizuoka Prefecture","2":"2853"},{"1":"Alaska","2":"2536"},{"1":"Baden-Württemberg","2":"2536"},{"1":"Provence-Alpes-Côte d'Azur Region","2":"2536"},{"1":"Bavaria","2":"2219"},{"1":"Aichi Prefecture","2":"1902"},{"1":"Alberta","2":"1902"},{"1":"Delaware","2":"1902"},{"1":"Fukuoka Prefecture","2":"1902"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>tidy_apple_counts$region</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["x"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Washington County","2":"8559"},{"1":"Jefferson County","2":"7925"},{"1":"Montgomery County","2":"7608"},{"1":"Franklin County","2":"6974"},{"1":"Madison County","2":"6657"},{"1":"Jackson County","2":"6023"},{"1":"Marion County","2":"5389"},{"1":"Monroe County","2":"5072"},{"1":"Greene County","2":"4121"},{"1":"Lincoln County","2":"4121"},{"1":"Orange County","2":"4121"},{"1":"Union County","2":"4121"},{"1":"Clark County","2":"3804"},{"1":"Douglas County","2":"3804"},{"1":"Lee County","2":"3804"},{"1":"Warren County","2":"3804"},{"1":"Adams County","2":"3487"},{"1":"Polk County","2":"3487"},{"1":"Wayne County","2":"3487"},{"1":"Carroll County","2":"3170"},{"1":"Hamilton County","2":"3170"},{"1":"Henry County","2":"3170"},{"1":"Lake County","2":"3170"},{"1":"Shelby County","2":"3170"},{"1":"Benton County","2":"2853"},{"1":"Cass County","2":"2853"},{"1":"Clay County","2":"2853"},{"1":"Cumberland County","2":"2853"},{"1":"Delaware County","2":"2853"},{"1":"Fayette County","2":"2853"},{"1":"Cherokee County","2":"2536"},{"1":"Clinton County","2":"2536"},{"1":"Fulton County","2":"2536"},{"1":"Johnson County","2":"2536"},{"1":"Lawrence County","2":"2536"},{"1":"Marshall County","2":"2536"},{"1":"Boone County","2":"2219"},{"1":"Brown County","2":"2219"},{"1":"Columbia County","2":"2219"},{"1":"DeKalb County","2":"2219"},{"1":"Essex County","2":"2219"},{"1":"Jasper County","2":"2219"},{"1":"Kent County","2":"2219"},{"1":"Knox County","2":"2219"},{"1":"Mercer County","2":"2219"},{"1":"Middlesex County","2":"2219"},{"1":"Pike County","2":"2219"},{"1":"Putnam County","2":"2219"},{"1":"Summit County","2":"2219"},{"1":"York County","2":"2219"},{"1":"Birmingham","2":"1902"},{"1":"Butler County","2":"1902"},{"1":"Crawford County","2":"1902"},{"1":"El Paso County","2":"1902"},{"1":"Erie County","2":"1902"},{"1":"Grant County","2":"1902"},{"1":"Harrison County","2":"1902"},{"1":"Logan County","2":"1902"},{"1":"Randolph County","2":"1902"},{"1":"Richmond County","2":"1902"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<div id="visualizing-distributions" class="section level1" number="7">
<h1 number="7"><span class="header-section-number">7</span> Visualizing Distributions</h1>
<p>Before we start looking at relationships <em>between</em> variables, we should examine each variable’s underlying distribution. In the next section, we’re going to cover a few graphs that display variable distributions: histograms, density, violin, and ridgeline plots,</p>
<div id="histograms" class="section level2 tabset" number="7.1">
<h2 class="tabset" number="7.1"><span class="header-section-number">7.1</span> Histograms</h2>
<p>A histogram is a special kind of bar graph–it only takes a single continuous variable (in this case, <code>dir_request</code>), and it displays a relative breakdown of the values.</p>
<p>The <code>x</code> axis for the histogram will have the direction requests, and the <code>y</code> variable will display a count of the values.</p>
<pre class="r"><code>lab_hist &lt;- labs(x = &quot;Apple directions requests&quot;,
                 y = &quot;Count&quot;,
     title = &quot;Distribution of Direction Requests&quot;,
     subtitle = &quot;source: https://covid19.apple.com/mobility&quot;)</code></pre>
<div id="exercise" class="section level3" number="7.1.1">
<h3 number="7.1.1"><span class="header-section-number">7.1.1</span> exercise</h3>
<p>Create a histogram of direction requests using <code>dir_request</code></p>
<pre class="r"><code>TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = ____________)) + 
  lab_hist</code></pre>
</div>
<div id="solution" class="section level3" number="7.1.2">
<h3 number="7.1.2"><span class="header-section-number">7.1.2</span> solution</h3>
<p>See blow:</p>
<pre class="r"><code>TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request)) + 
  lab_hist</code></pre>
<p><img src="img/geom_histogram-sol-1.png" width="100%" height="100%" /></p>
</div>
</div>
<div id="adjusting-y-axes" class="section level2 tabset" number="7.2">
<h2 class="tabset" number="7.2"><span class="header-section-number">7.2</span> Adjusting Y Axes</h2>
<p>We can see the <code>y</code> axis of the histogram is in scientific notation. This might be hard for some audiences to interpret, so we will change this to use the whole number with commas with the <a href="https://scales.r-lib.org/"><code>scales</code> package</a>.</p>
<div id="exercise-1" class="section level3" number="7.2.1">
<h3 number="7.2.1"><span class="header-section-number">7.2.1</span> exercise</h3>
<p>Add the <code>scales::comma</code> value to the <code>scale_y_continuous()</code> function.</p>
<pre class="r"><code>library(scales)
TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request)) + 
  scale_y_continuous(labels = __________) +
  lab_hist</code></pre>
</div>
<div id="solution-1" class="section level3" number="7.2.2">
<h3 number="7.2.2"><span class="header-section-number">7.2.2</span> solution</h3>
<p>See below:</p>
<pre class="r"><code>library(scales)
TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request)) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist</code></pre>
<p><img src="img/scales-sol-1.png" width="100%" height="100%" /></p>
</div>
</div>
<div id="histogram-shape" class="section level2 tabset" number="7.3">
<h2 class="tabset" number="7.3"><span class="header-section-number">7.3</span> Histogram Shape</h2>
<p>We can control the shape of the histogram with the <code>bins</code> argument. The default is <code>30</code>.</p>
<div id="exercie" class="section level3" number="7.3.1">
<h3 number="7.3.1"><span class="header-section-number">7.3.1</span> exercie</h3>
<p>Set <code>bins</code> to <code>15</code>.</p>
<pre class="r"><code>TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = __) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist</code></pre>
</div>
<div id="solution-2" class="section level3" number="7.3.2">
<h3 number="7.3.2"><span class="header-section-number">7.3.2</span> solution</h3>
<p>See below:</p>
<pre class="r"><code>TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = 15) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist</code></pre>
<p><img src="img/bins-15-sol-1.png" width="100%" height="100%" /></p>
</div>
<div id="exercise-2" class="section level3" number="7.3.3">
<h3 number="7.3.3"><span class="header-section-number">7.3.3</span> exercise</h3>
<p>Set <code>bins</code> to <code>45</code> and assign it to <code>gg_hist45</code>.</p>
<pre class="r"><code>TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = __) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist -&gt; _____________</code></pre>
</div>
<div id="solution-3" class="section level3" number="7.3.4">
<h3 number="7.3.4"><span class="header-section-number">7.3.4</span> solution</h3>
<p>See below:</p>
<pre class="r"><code>TidyApple %&gt;% ggplot() + 
  geom_histogram(aes(x = dir_request), bins = 45) + 
  scale_y_continuous(labels = scales::comma) +
  lab_hist -&gt; gg_hist45</code></pre>
<p><img src="img/gg_hist45-show-1.png" width="100%" height="100%" /></p>
</div>
</div>
<div id="density-plots" class="section level2 tabset" number="7.4">
<h2 class="tabset" number="7.4"><span class="header-section-number">7.4</span> Density Plots</h2>
<p>What if we want to see how a continuous variable is distributed across a categorical variable? We did this in the <a href="https://mjfrigaard.github.io/data-viz-intro/Index.html#87">previous lesson with a boxplot</a>.</p>
<p>Density plots come in handy here (so do <code>geom_boxplot()</code>s!). Read more about the density geom <a href="https://ggplot2.tidyverse.org/reference/geom_density.html">here</a>.</p>
<p>We are going to create the graph labels so we know what to expect when we build our graph.</p>
<p>We want to see the distribution of the directions request, filled by the levels of transportation type.</p>
<pre class="r"><code>lab_density &lt;- labs(x = &quot;Apple directions requests&quot;,
                    fill = &quot;Transit Type&quot;,
     title = &quot;Distribution of Direction Requests vs. Transportation Type&quot;,
     subtitle = &quot;source: https://covid19.apple.com/mobility&quot;)</code></pre>
<p>Now we build the density plot, passing the variables so they match our labels above.</p>
<div id="exercise-3" class="section level3" number="7.4.1">
<h3 number="7.4.1"><span class="header-section-number">7.4.1</span> exercise</h3>
<p>Create a density plot of direction requests colored by the type of transportation.</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_density(aes(x = __________, fill = __________)) + 
  lab_density</code></pre>
</div>
<div id="solution-4" class="section level3" number="7.4.2">
<h3 number="7.4.2"><span class="header-section-number">7.4.2</span> solution</h3>
<p>See below:</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_density(aes(x = dir_request, fill = trans_type)) + 
  lab_density</code></pre>
<p><img src="img/density-sol-1.png" width="100%" height="100%" /></p>
<p><em>One drawback to density plots is the <code>y</code> axis can be hard to interpret</em></p>
</div>
<div id="exercise-4" class="section level3" number="7.4.3">
<h3 number="7.4.3"><span class="header-section-number">7.4.3</span> exercise</h3>
<p>Adjust the overlapping densities by setting <code>alpha</code> to <code>1/3</code>. Assign this plot to <code>gg_density</code>.</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_density(aes(x = dir_request, fill = trans_type), 
               alpha = __________) + 
  
  lab_density -&gt; __________</code></pre>
</div>
<div id="solution-5" class="section level3" number="7.4.4">
<h3 number="7.4.4"><span class="header-section-number">7.4.4</span> solution</h3>
<p>See below:</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_density(aes(x = dir_request, fill = trans_type), 
               alpha = 1/3) + 
  lab_density -&gt; gg_density

gg_density</code></pre>
<p><img src="img/density-alpha-1.png" width="100%" height="100%" /></p>
</div>
</div>
<div id="ridgeline-plots" class="section level2 tabset" number="7.5">
<h2 class="tabset" number="7.5"><span class="header-section-number">7.5</span> Ridgeline Plots</h2>
<p>Another option is a ridgeline plot (from the <code>ggridges</code> package). These display multiple densities.</p>
<pre class="r"><code>lab_ridges &lt;- labs(
     title = &quot;Direction Requests by Transportation Type&quot;,
     subtitle = &quot;source: https://covid19.apple.com/mobility&quot;,
     fill = &quot;Transit type&quot;,
     x = &quot;Apple directions requests&quot;,
     y = &quot;Transportation Types&quot;)</code></pre>
<pre class="r"><code>library(ggridges)
TidyApple %&gt;%  
  ggplot() + 
  geom_density_ridges(aes(x = dir_request, 
                          y = trans_type, 
                          fill = trans_type), 
                      alpha = 1/5) + 
  lab_ridges</code></pre>
<p><img src="img/geom_density_ridges-sol-1.png" width="100%" height="100%" /></p>
</div>
<div id="violin-plots" class="section level2 tabset" number="7.6">
<h2 class="tabset" number="7.6"><span class="header-section-number">7.6</span> Violin Plots</h2>
<p>Another alternative to the density plot is the violin plot.</p>
<div id="exercise-5" class="section level3" number="7.6.1">
<h3 number="7.6.1"><span class="header-section-number">7.6.1</span> exercise</h3>
<ul>
<li>assign <code>"Apple directions requests"</code> to the <code>x</code> axis</li>
<li>assign <code>"Transit Type"</code> to the <code>y</code> axis</li>
</ul>
<pre class="r"><code>lab_violin &lt;- labs(x = _________________________,
                    y = _________________________,
                   fill = &quot;Transit Type&quot;,
     title = &quot;Distribution of Direction Requests vs. Transportation Type&quot;,
     subtitle = &quot;source: https://covid19.apple.com/mobility&quot;)</code></pre>
</div>
<div id="solution-6" class="section level3" number="7.6.2">
<h3 number="7.6.2"><span class="header-section-number">7.6.2</span> solution</h3>
<pre class="r"><code>lab_violin &lt;- labs(x = &quot;Transit Type&quot;,
                   y = &quot;Apple directions requests&quot;,
                   fill = &quot;Transit Type&quot;,
     title = &quot;Distribution of Direction Requests vs. Transportation Type&quot;,
     subtitle = &quot;source: https://covid19.apple.com/mobility&quot;)</code></pre>
</div>
<div id="exercise-6" class="section level3" number="7.6.3">
<h3 number="7.6.3"><span class="header-section-number">7.6.3</span> exercise</h3>
<p>Add a <code>geom_violin()</code> to the code below:</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  ____________(aes(y = dir_request, x = trans_type, 
                  fill = trans_type)) + 
  lab_violin</code></pre>
</div>
<div id="solution-7" class="section level3" number="7.6.4">
<h3 number="7.6.4"><span class="header-section-number">7.6.4</span> solution</h3>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_violin(aes(y = dir_request, x = trans_type, 
                  fill = trans_type)) + 
  lab_violin</code></pre>
<p><img src="img/geom_violin-sol-1.png" width="100%" height="100%" /></p>
</div>
<div id="exercise-7" class="section level3" number="7.6.5">
<h3 number="7.6.5"><span class="header-section-number">7.6.5</span> exercise</h3>
<p>The great thing about <code>ggplot2</code>s layered syntax, is that we can add <code>geoms</code> with similar aesthetics to the same graph! For example, we can see how <code>geom_violin</code>s and <code>geom_boxplot</code>s are related by adding a <code>geom_boxplot()</code> layer to the graph above.</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_violin(aes(y = dir_request, x = trans_type, 
                  fill = trans_type), alpha = 1/5) + 
  ___________(aes(y = dir_request, x = trans_type, 
                   color = trans_type)) + 
  lab_violin</code></pre>
</div>
<div id="solution-8" class="section level3" number="7.6.6">
<h3 number="7.6.6"><span class="header-section-number">7.6.6</span> solution</h3>
<p>Note we set the <code>alpha</code> to <code>1/5</code> for the <code>geom_violin()</code>, and the <code>color</code> to <code>trans_type</code> for the <code>geom_boxplot()</code>.</p>
<pre class="r"><code>TidyApple %&gt;% 
  ggplot() +
  geom_violin(aes(y = dir_request, x = trans_type, 
                  fill = trans_type), alpha = 1/5) + 
  geom_boxplot(aes(y = dir_request, x = trans_type, 
                   color = trans_type)) + 
  lab_violin</code></pre>
<p><img src="img/geom_violin-boxplot-sol-1.png" width="100%" height="100%" /></p>
</div>
</div>
<div id="export-the-data" class="section level2 tabset" number="7.7">
<h2 class="tabset" number="7.7"><span class="header-section-number">7.7</span> Export the data</h2>
<p>You’ll want to export the <code>TidyApple</code> dataset for the next set of exercise.</p>
<p>The code chunk below exports the dataset as a .csv with a date-stamp.</p>
<pre class="r"><code>readr::write_csv(x = TidyApple, 
                 file = 
                 paste0(&quot;data/&quot;, 
                        base::noquote(lubridate::today()),
                                        &quot;-TidyApple.csv&quot;))</code></pre>
</div>
</div>

<i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4,h5,h6",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
